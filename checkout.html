<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-W3VF478PSR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-W3VF478PSR');
</script>

  <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K5DJ5HHF');</script>
<!-- End Google Tag Manager -->
  <meta charset="UTF-8" />
  <title>LoveBloom ‚Äì Checkout</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --primary: #ff4b7d;
      --primary-light: #ff9bb5;
      --bg: #fff5f8;
      --dark: #2b2b2b;
      --card-bg: #ffffff;
      --accent: #ffb347;
      --shadow-soft: 0 10px 25px rgba(0, 0, 0, 0.08);
      --radius-xl: 18px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      background: radial-gradient(circle at top left, #ffe1ec, #fff5f8 40%, #ffffff 80%);
      color: var(--dark);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    a {
      text-decoration: none;
      color: inherit;
    }

    header {
      position: sticky;
      top: 0;
      z-index: 20;
      backdrop-filter: blur(16px);
      background: linear-gradient(90deg, rgba(255, 245, 248, 0.94), rgba(255, 255, 255, 0.96));
      border-bottom: 1px solid rgba(255, 192, 203, 0.4);
    }

    .nav-container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0.7rem 1.2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 700;
      font-size: 1.2rem;
      color: var(--primary);
    }

    .logo span.icon {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #ffe6f0, #ff4b7d);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 1rem;
      box-shadow: var(--shadow-soft);
    }

    .cart-pill {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.35rem 0.7rem;
      border-radius: 999px;
      background: #fff;
      box-shadow: var(--shadow-soft);
      font-size: 0.8rem;
    }

    .cart-count {
      background: var(--primary);
      color: #fff;
      border-radius: 999px;
      padding: 0.1rem 0.45rem;
      font-size: 0.7rem;
    }

    main {
      flex: 1;
    }

    .page {
      max-width: 1100px;
      margin: 1.8rem auto 2.2rem;
      padding: 0 1.2rem;
    }

    .page-title {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 0.8rem;
      margin-bottom: 1.2rem;
    }

    .page-title h1 {
      font-size: 1.6rem;
    }

    .step-indicator {
      font-size: 0.8rem;
      color: #777;
    }

    .step-indicator span.current {
      color: var(--primary);
      font-weight: 600;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
      gap: 1.4rem;
      align-items: flex-start;
    }

    .card {
      background: var(--card-bg);
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow-soft);
      padding: 1rem 1.1rem;
    }

    .card-title {
      font-size: 1rem;
      margin-bottom: 0.7rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .card-subtitle {
      font-size: 0.8rem;
      color: #777;
      margin-bottom: 0.8rem;
    }

    .cart-items {
      border-radius: 14px;
      border: 1px solid #f1d2dd;
      padding: 0.7rem 0.8rem;
      max-height: 260px;
      overflow-y: auto;
      background: #fff7fa;
    }

    .cart-row {
      display: grid;
      grid-template-columns: 3fr auto auto auto;
      gap: 0.4rem;
      align-items: center;
      font-size: 0.82rem;
      padding: 0.35rem 0;
      border-bottom: 1px dashed #f1d2dd;
    }

    .cart-row:last-child {
      border-bottom: none;
    }

    .cart-row-title {
      font-weight: 600;
    }

    .cart-row small {
      display: block;
      color: #777;
      font-size: 0.74rem;
    }

    .cart-row-qty input {
      width: 50px;
      padding: 0.2rem 0.25rem;
      font-size: 0.8rem;
      border-radius: 8px;
      border: 1px solid #e1b9c9;
      text-align: center;
    }

    .cart-row-price,
    .cart-row-total {
      text-align: right;
    }

    .empty-cart-msg {
      font-size: 0.85rem;
      color: #777;
      text-align: center;
      padding: 0.5rem;
    }

    .summary-line {
      display: flex;
      justify-content: space-between;
      font-size: 0.82rem;
      margin-top: 0.3rem;
    }

    .summary-line.bold {
      font-weight: 700;
      margin-top: 0.5rem;
    }

    .badge-small {
      font-size: 0.7rem;
      padding: 0.15rem 0.45rem;
      border-radius: 999px;
      background: #e6fff4;
      color: #2ecc71;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
    }

    label {
      font-size: 0.78rem;
      color: #555;
      margin-bottom: 0.15rem;
      display: inline-block;
    }

    .field-group {
      display: flex;
      flex-direction: column;
    }

    input,
    textarea,
    select {
      padding: 0.45rem 0.55rem;
      border-radius: 10px;
      border: 1px solid #e3c2cf;
      font-size: 0.85rem;
      outline: none;
      transition: border 0.15s ease, box-shadow 0.15s ease;
      background: #fffdfd;
    }

    input:focus,
    textarea:focus,
    select:focus {
      border-color: var(--primary-light);
      box-shadow: 0 0 0 2px rgba(255, 151, 171, 0.2);
    }

    .field-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 0.6rem;
    }

    textarea {
      min-height: 80px;
      resize: vertical;
    }

    .note {
      font-size: 0.78rem;
      color: #777;
    }

    .btn-primary {
      margin-top: 0.7rem;
      border-radius: 999px;
      padding: 0.55rem 1.1rem;
      border: none;
      cursor: pointer;
      font-size: 0.9rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.45rem;
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
      color: #fff;
      box-shadow: 0 10px 30px rgba(255, 75, 125, 0.4);
      width: 100%;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 35px rgba(255, 75, 125, 0.5);
    }

    .btn-secondary-link {
      margin-top: 0.4rem;
      font-size: 0.8rem;
      color: #777;
      text-align: center;
      cursor: pointer;
    }

    .highlight {
      color: var(--primary);
      font-weight: 600;
    }

    footer {
      border-top: 1px solid rgba(255, 192, 203, 0.5);
      background: #fff;
      margin-top: auto;
    }

    .footer-inner {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0.9rem 1.2rem;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 0.7rem;
      font-size: 0.78rem;
      color: #777;
    }

    @media (max-width: 820px) {
      .layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }
  </style>
</head>
<body>

  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K5DJ5HHF"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
  <header>
    <div class="nav-container">
      <a href="index.html" class="logo">
        <span class="icon">üíê</span>
        <span>LoveBloom</span>
      </a>
      <div class="cart-pill">
        üõí Cart items: <span class="cart-count" id="cart-count">0</span>
      </div>
    </div>
  </header>

  <main>
    <section class="page">
      <div class="page-title">
        <h1>Checkout</h1>
        <div class="step-indicator">
          <span class="current">1. Details</span> ‚Üí 2. Payment ‚Üí 3. Thank you
        </div>
      </div>

      <div class="layout">
        <!-- LEFT: FORM -->
        <div class="card">
          <div class="card-title">
            <span>Delivery details</span>
            <span class="badge-small">üéÇ Birthday couple-special</span>
          </div>
          <p class="card-subtitle">
            Tell us who we‚Äôre surprising and where to deliver this beautiful bouquet & gift combo.
          </p>

          <form id="checkout-form">
            <div class="field-row">
              <div class="field-group">
                <label for="customerName">Your name *</label>
                <input id="customerName" name="customerName" required placeholder="e.g. Saquib" />
              </div>
              <div class="field-group">
                <label for="partnerName">Partner‚Äôs name (optional)</label>
                <input id="partnerName" name="partnerName" placeholder="e.g. Ayesha" />
              </div>
            </div>

            <div class="field-row">
              <div class="field-group">
                <label for="email">Email *</label>
                <input type="email" id="email" name="email" required placeholder="you@example.com" />
              </div>
              <div class="field-group">
                <label for="phone">Phone *</label>
                <input type="tel" id="phone" name="phone" required placeholder="+91-XXXXXXXXXX" />
              </div>
            </div>

            <div class="field-group">
              <label for="address">Delivery address *</label>
              <textarea id="address" name="address" required placeholder="Flat / House no, Street, Landmark, City, Pincode"></textarea>
            </div>

            <div class="field-row">
              <div class="field-group">
                <label for="city">City *</label>
                <input id="city" name="city" required placeholder="Kolkata, Mumbai, Delhi..." />
              </div>
              <div class="field-group">
                <label for="pincode">Pincode *</label>
                <input id="pincode" name="pincode" required placeholder="700001" />
              </div>
            </div>

            <div class="field-row">
              <div class="field-group">
                <label for="deliveryDate">Delivery date *</label>
                <input type="date" id="deliveryDate" name="deliveryDate" required />
              </div>
              <div class="field-group">
                <label for="slot">Delivery slot *</label>
                <select id="slot" name="slot" required>
                  <option value="">Select slot</option>
                  <option value="Morning (9am ‚Äì 12pm)">Morning (9am ‚Äì 12pm)</option>
                  <option value="Afternoon (12pm ‚Äì 4pm)">Afternoon (12pm ‚Äì 4pm)</option>
                  <option value="Evening (4pm ‚Äì 9pm)">Evening (4pm ‚Äì 9pm)</option>
                  <option value="Midnight surprise (11:30pm ‚Äì 12:15am)">Midnight surprise (11:30pm ‚Äì 12:15am)</option>
                </select>
              </div>
            </div>

            <div class="field-group">
              <label for="message">Message on card (optional)</label>
              <textarea id="message" name="message" placeholder="e.g. ‚ÄòTo the love of my life, happy birthday!‚Äô"></textarea>
              <p class="note">We‚Äôll handwrite this on a premium card and send it with your bouquet üíå</p>
            </div>

            <button type="submit" class="btn-primary">
                <a href="https://love-bloomnew.netlify.app/payment" 
           style="color:white; text-decoration:none; display:block; width:100%;">
     Continue to Payment ‚Üí
  </a>
</button>

            <div class="btn-secondary-link" onclick="window.location.href='index.html'">
              ‚Üê Continue shopping
            </div>
          </form>
        </div>

        <!-- RIGHT: ORDER SUMMARY -->
        <div class="card">
          <div class="card-title">
            <span>Order summary</span>
          </div>
          <div class="cart-items" id="cart-items"></div>

          <div style="margin-top: 0.7rem; border-top: 1px dashed #f1d2dd; padding-top: 0.5rem;">
            <div class="summary-line">
              <span>Subtotal</span>
              <span id="summary-subtotal">‚Çπ0</span>
            </div>
            <div class="summary-line">
              <span>Delivery</span>
              <span id="summary-delivery">‚Çπ79</span>
            </div>
            <div class="summary-line">
              <span>Gift wrap + handwritten note</span>
              <span id="summary-wrap">‚Çπ49</span>
            </div>
            <div class="summary-line bold">
              <span>Total</span>
              <span id="summary-total">‚Çπ0</span>
            </div>
            <p class="note" style="margin-top: 0.4rem;">
              üéâ Use code <span class="highlight">LOVE10</span> on payment page to unlock a surprise discount.
            </p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-inner">
      <span>Fresh flowers guaranteed ‚Äì we replace if you‚Äôre not happy, no questions asked.</span>
      <span>Secure checkout ‚Ä¢ UPI / Cards / Netbanking support</span>
    </div>
  </footer>

  <script>
    function getCart() {
      try {
        return JSON.parse(localStorage.getItem("lb_cart") || "[]");
      } catch {
        return [];
      }
    }

    function saveCart(cart) {
      localStorage.setItem("lb_cart", JSON.stringify(cart));
    }

    function updateCartCount() {
      const cart = getCart();
      const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
      document.getElementById("cart-count").textContent = totalItems;
    }

    function renderCart() {
      const cart = getCart();
      const container = document.getElementById("cart-items");
      if (!cart.length) {
        container.innerHTML = `
          <div class="empty-cart-msg">
            Your cart is empty. Add a bouquet from the <a href="index.html" class="highlight">home page</a>.
          </div>`;
        document.getElementById("summary-subtotal").textContent = "‚Çπ0";
        document.getElementById("summary-delivery").textContent = "‚Çπ0";
        document.getElementById("summary-wrap").textContent = "‚Çπ0";
        document.getElementById("summary-total").textContent = "‚Çπ0";
        return;
      }

      let subtotal = 0;
      container.innerHTML = cart
        .map((item, idx) => {
          const lineTotal = item.price * item.quantity;
          subtotal += lineTotal;
          return `
          <div class="cart-row">
            <div>
              <span class="cart-row-title">${item.name}</span>
              <small>Qty: <span>${item.quantity}</span></small>
            </div>
            <div class="cart-row-price">‚Çπ${item.price}</div>
            <div class="cart-row-qty">
              <input type="number" min="1" value="${item.quantity}" onchange="changeQty(${idx}, this.value)" />
            </div>
            <div class="cart-row-total">‚Çπ${lineTotal}</div>
          </div>
        `;
        })
        .join("");

      const delivery = 79;
      const wrap = 49;
      const total = subtotal + delivery + wrap;

      document.getElementById("summary-subtotal").textContent = "‚Çπ" + subtotal;
      document.getElementById("summary-delivery").textContent = "‚Çπ" + delivery;
      document.getElementById("summary-wrap").textContent = "‚Çπ" + wrap;
      document.getElementById("summary-total").textContent = "‚Çπ" + total;

      // Persist total for payment page
      localStorage.setItem("lb_order_total", String(total));
    }

    function changeQty(index, value) {
      let qty = parseInt(value, 10);
      if (isNaN(qty) || qty < 1) qty = 1;
      const cart = getCart();
      if (!cart[index]) return;
      cart[index].quantity = qty;
      saveCart(cart);
      updateCartCount();
      renderCart();
    }

    // Handle form submit
    const checkoutForm = document.getElementById("checkout-form");
    checkoutForm.addEventListener("submit", function (e) {
      e.preventDefault();
      const cart = getCart();
      if (!cart.length) {
        alert("Your cart is empty. Please add at least one product.");
        return;
      }

      const data = {
        customerName: checkoutForm.customerName.value.trim(),
        partnerName: checkoutForm.partnerName.value.trim(),
        email: checkoutForm.email.value.trim(),
        phone: checkoutForm.phone.value.trim(),
        address: checkoutForm.address.value.trim(),
        city: checkoutForm.city.value.trim(),
        pincode: checkoutForm.pincode.value.trim(),
        deliveryDate: checkoutForm.deliveryDate.value,
        slot: checkoutForm.slot.value,
        message: checkoutForm.message.value.trim(),
      };

      if (!data.customerName || !data.email || !data.phone || !data.address || !data.city || !data.pincode || !data.deliveryDate || !data.slot) {
        alert("Please fill all required fields marked with *");
        return;
      }

      localStorage.setItem("lb_customer", JSON.stringify(data));
      // window.location.href = "https://love-bloomnew.netlify.app/payment";
    });

    // Init
    updateCartCount();
    renderCart();
  </script>
</body>
</html>
